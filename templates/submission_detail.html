{% extends "base.html" %}

{% block title %}Contact Submission Details - Ladies Collections Admin{% endblock %}

{% block content %}
  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <div class="breadcrumb-content">
      <a href="{{ url_for('index') }}">Home</a>
      <span>></span>
      <a href="{{ url_for('admin') }}">Admin</a>
      <span>></span>
      <span>Submission Details</span>
    </div>
  </div>

  <!-- Page Hero -->
  <section class="page-hero">
    <h1>Contact Submission</h1>
    <p>Full message details from {{ submission.name }}</p>
  </section>

  <!-- Submission Details -->
  <section class="content-section">
    <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 2rem;">
      
      <!-- Header -->
      <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #f1f3f4;">
        <div>
          <h2 style="color: #a10649; margin-bottom: 0.5rem;">{{ submission.subject }}</h2>
          <p style="color: #666; margin: 0;">
            Submitted on {{ submission.submitted_at.strftime('%B %d, %Y at %H:%M') }}
          </p>
        </div>
        <div>
          {% if submission.is_read %}
            <span style="background: #28a745; color: white; padding: 0.5rem 1rem; border-radius: 15px; font-size: 0.9rem;">‚úì Read</span>
          {% else %}
            <span style="background: #dc3545; color: white; padding: 0.5rem 1rem; border-radius: 15px; font-size: 0.9rem;">‚óè New</span>
          {% endif %}
        </div>
      </div>

      <!-- Customer Information -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
        <div>
          <h3 style="color: #a10649; margin-bottom: 1rem;">Customer Information</h3>
          <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px;">
            <div style="margin-bottom: 1rem;">
              <strong>Name:</strong><br>
              <span style="font-size: 1.1rem;">{{ submission.name }}</span>
            </div>
            <div style="margin-bottom: 1rem;">
              <strong>Email:</strong><br>
              <a href="mailto:{{ submission.email }}" style="color: #a10649; text-decoration: none; font-size: 1.1rem;">
                {{ submission.email }}
              </a>
            </div>
            {% if submission.phone %}
            <div>
              <strong>Phone:</strong><br>
              <a href="tel:{{ submission.phone }}" style="color: #a10649; text-decoration: none; font-size: 1.1rem;">
                {{ submission.phone }}
              </a>
            </div>
            {% endif %}
          </div>
        </div>

        <div>
          <h3 style="color: #a10649; margin-bottom: 1rem;">Quick Actions</h3>
          <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px;">
            <div style="margin-bottom: 1rem;">
              <a href="mailto:{{ submission.email }}?subject=Re: {{ submission.subject }}" 
                 class="btn" style="width: 100%; text-align: center; margin-bottom: 0.5rem;">
                üìß Reply via Email
              </a>
            </div>
            {% if submission.phone %}
            <div style="margin-bottom: 1rem;">
              <a href="tel:{{ submission.phone }}" 
                 class="btn btn-secondary" style="width: 100%; text-align: center; margin-bottom: 0.5rem;">
                üìû Call Customer
              </a>
            </div>
            {% endif %}
            <div>
              <a href="https://wa.me/{{ submission.phone.replace(' ', '').replace('-', '') if submission.phone else ''}}" 
                 class="btn btn-outline" style="width: 100%; text-align: center;">
                üí¨ WhatsApp
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Message Content -->
      <div>
        <h3 style="color: #a10649; margin-bottom: 1rem;">Message</h3>
        <div style="background: #f8f9fa; padding: 2rem; border-radius: 10px; border-left: 4px solid #a10649;">
          <p style="white-space: pre-wrap; line-height: 1.6; margin: 0; font-size: 1.1rem;">{{ submission.message }}</p>
        </div>
      </div>

      <!-- Action Buttons -->
      <div style="margin-top: 2rem; padding-top: 1rem; border-top: 2px solid #f1f3f4; text-align: center;">
        {% if not submission.is_read %}
          <a href="{{ url_for('mark_read', submission_id=submission.id) }}" 
             class="btn" style="margin-right: 1rem;">
            Mark as Read
          </a>
        {% endif %}
        <a href="{{ url_for('admin') }}" class="btn btn-secondary">
          ‚Üê Back to Admin Panel
        </a>
      </div>
    </div>

    <!-- Tips for Sabiha Rahman -->
    <div style="background: #e8f4fd; padding: 2rem; border-radius: 10px; border-left: 4px solid #007bff;">
      <h3 style="color: #007bff; margin-bottom: 1rem;">üí° Customer Service Tips</h3>
      <ul style="margin: 0;">
        <li><strong>Respond Quickly:</strong> Try to reply within 24 hours for best customer experience</li>
        <li><strong>Personal Touch:</strong> Mention specific details from their message to show you read it carefully</li>
        <li><strong>Invite to Store:</strong> Encourage them to visit your Koramangala showroom for personal consultation</li>
        <li><strong>Follow Up:</strong> If discussing jewelry pieces, offer to send photos or schedule a video call</li>
      </ul>
    </div>
  </section>
{% endblock %}